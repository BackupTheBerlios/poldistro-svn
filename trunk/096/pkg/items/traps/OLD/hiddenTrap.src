use uo;
use os;
use cfgfile;
use util;


program hiddenTrap(mobile, trap)
	var itemdesc := ReadConfigFile("itemdesc");
	var elem := FindConfigElem(itemdesc, trap.objtype);
	var effect := GetConfigInt(elem, "Effect");
	var dieroll := GetConfigString(elem, "Damage");

	SendSysMessage(mobile, "You set off a trap!");
	PlayStationaryEffect(trap.x, trap.y, trap.z, effect, 0xa, 0xb, 0, mobile.realm);
	var dam := RandomDiceRoll(dieroll);
	ApplyRawDamage(mobile, dam);
endprogram
