use uo;
use os;
use util;

program Flatulence(params)
	var who := params[1];
	
	var sounds := array{0x5d, 0x5f, 0x5b, 0x22};
	
	SendSysMessage(who, "Your stomach feels bloated.");
	
	while( 1 )
		sleep(RandomDiceRoll("6d5"));
		
		PlaySoundEffect(who, sounds[RandomInt(sounds.size())+1]);
		
		PrintTextAbove(who, "*breaks the wind*");
		
		foreach mobile in ListMobilesNearLocationEX(who.x, who.y, who.z, 10, LISTEX_FLAG_NORMAL+LISTEX_FLAG_HIDDEN)
			SendSysMessage(mobile, "You notice an indistinguishable stench in the air.");
			sleepms(2);
		endforeach
	endwhile
endprogram
